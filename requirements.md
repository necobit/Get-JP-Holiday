# Get-JP-Holiday Arduinoライブラリ要件定義

## 概要
Get-JP-Holidayは、Arduinoデバイスで日本の国民の祝日を判定するためのライブラリです。「国民の祝日に関する法律（昭和23年法律第178号）」に基づいて、特定の日付が祝日かどうかを判定し、祝日の名称を取得することができます。このライブラリでは、国民の祝日だけでなく、振替休日も休日として扱います。

## 目的
- Arduinoプロジェクトで日本の祝日情報を簡単に利用できるようにする
- 限られたメモリ容量のArduinoデバイスでも効率的に動作するよう最適化する
- 正確な祝日判定を提供する

## 機能要件

### 基本機能
1. **祝日判定機能**
   - 指定された日付が祝日かどうかを判定する
   - 祝日の場合、祝日の名称を返す

2. **祝日リスト取得**
   - 指定された年の祝日リスト（日付と名称）を取得する

3. **振替休日・国民の休日の判定**
   - 「国民の祝日に関する法律」第3条第2項に規定される振替休日の判定
   - 「国民の祝日に関する法律」第3条第3項に規定される国民の休日（祝日に挟まれた平日）の判定

### 対応する祝日
「国民の祝日に関する法律」に基づく16の祝日に対応：

1. 元日（1月1日）
2. 成人の日（1月の第2月曜日）
3. 建国記念の日（2月11日）
4. 天皇誕生日（2月23日）
5. 春分の日（春分日）
6. 昭和の日（4月29日）
7. 憲法記念日（5月3日）
8. みどりの日（5月4日）
9. こどもの日（5月5日）
10. 海の日（7月の第3月曜日）
11. 山の日（8月11日）
12. 敬老の日（9月の第3月曜日）
13. 秋分の日（秋分日）
14. スポーツの日（10月の第2月曜日）
15. 文化の日（11月3日）
16. 勤労感謝の日（11月23日）

### 振替休日
「国民の祝日に関する法律」第3条第2項に基づき、国民の祝日が日曜日に当たるときは、その日後においてその日に最も近い国民の祝日でない日を休日（振替休日）とします。このライブラリでは、振替休日も祝日と同様に扱い、`isHoliday()`関数は振替休日に対してもtrueを返します。

## 技術要件

### ハードウェア要件
- 対応するArduinoボード：Arduino Uno、Arduino Mega、ESP8266、ESP32など
- 必要最小メモリ：できるだけ少ないRAM使用量で動作するよう最適化

### ソフトウェア要件
- Arduino IDE 1.8.0以上での動作保証
- Arduino標準ライブラリとの互換性確保
- C++言語で実装

### 日付計算
- 春分の日・秋分の日の計算方法の実装
- うるう年の考慮
- 曜日の計算（振替休日判定のため）

### データ保存方法
以下の方法から最適なものを選択：
1. 固定日付の祝日はコード内にハードコーディング
2. 可変日付の祝日（春分・秋分）は計算式で算出
3. 必要に応じてルックアップテーブルを使用（メモリ使用量とのトレードオフ）

## インターフェース仕様

### クラス構造
```cpp
class JpHoliday {
public:
  // コンストラクタ
  JpHoliday();
  
  // 指定日が祝日または振替休日かどうかを判定
  bool isHoliday(int year, int month, int day);
  
  // 祝日または振替休日の名称を取得（祝日でない場合は空文字列）
  // 振替休日の場合は「振替休日」と返す
  String getHolidayName(int year, int month, int day);
  
  // 指定年の祝日リストを取得
  // 戻り値の形式は検討（配列、構造体など）
  void getHolidayList(int year, /* 出力パラメータ */);
};
```

### 使用例
```cpp
#include <JpHoliday.h>

JpHoliday holiday;

void setup() {
  Serial.begin(9600);
  
  // 2025年1月1日が祝日かどうか確認
  if (holiday.isHoliday(2025, 1, 1)) {
    Serial.print("2025/1/1は");
    Serial.print(holiday.getHolidayName(2025, 1, 1));
    Serial.println("です");
  }
  
  // 振替休日の確認例（2024年2月12日は建国記念の日の振替休日）
  if (holiday.isHoliday(2024, 2, 12)) {
    Serial.print("2024/2/12は");
    Serial.print(holiday.getHolidayName(2024, 2, 12));
    Serial.println("です");
    // "2024/2/12は振替休日です" と表示される
  }
}

void loop() {
  // メインループ処理
}
```

## 制約条件

### メモリ使用量
- スケッチサイズ：できるだけ小さく（目標：10KB以下）
- RAM使用量：できるだけ小さく（目標：1KB以下）

### 処理速度
- 祝日判定は100ms以内に完了すること

### 対応年範囲
- 2000年から2030年までの祝日に対応（将来的に拡張可能な設計とする）

## テスト要件
1. 各祝日の正確な判定テスト
2. 振替休日の正確な判定テスト
3. 国民の休日（祝日に挟まれた平日）の正確な判定テスト
4. 春分の日・秋分の日の計算精度テスト
5. メモリ使用量テスト
6. 異常値（範囲外の年月日）入力時の動作テスト

## 今後の拡張性
1. 祝日法改正への対応方法
2. 対応年範囲の拡張方法
3. 他のカレンダー関連機能との連携

## 参考資料
- [国民の祝日について - 内閣府](https://www8.cao.go.jp/chosei/shukujitsu/gaiyou.html)
- 国民の祝日に関する法律（昭和23年法律第178号）
- 建国記念の日となる日を定める政令（昭和41年政令第376号）
